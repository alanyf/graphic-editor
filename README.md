# Modern.js App

## é¡¹ç›®ä»‹ç»

> ä¸€ä¸ªç±»ä¼¼PPTåŠŸèƒ½çš„å›¾å½¢ç¼–è¾‘å™¨ã€‚

**Demoä½“éªŒé“¾æ¥ï¼š**[å›¾å½¢ç¼–è¾‘å™¨åœ¨çº¿Demo](https://alanyf.gitee.io/monorepo/graphic-editor)

## ä¸€ã€èƒ½åŠ›æ¼”ç¤º


#### 1. å„ç§å›¾å½¢ç´ æ

<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a1d024b336344b59ddbe9903166ba14~tplv-k3u1fbpfcp-watermark.image?" alt="demo1" width="100%" />

#### 2. æ‹–æ‹½æ·»åŠ å›¾å½¢ï¼Œç¼–è¾‘æ ·å¼ï¼Œç§»åŠ¨ï¼Œç¼©æ”¾ï¼Œæ—‹è½¬

> æ”¯æŒç§»åŠ¨ï¼Œç¼©æ”¾ï¼Œæ—‹è½¬ä¸‰ç§åŸºç¡€çš„ç¼–è¾‘æ“ä½œï¼Œä¸”è§£å†³äº†åœ¨æ—‹è½¬ä¸€å®šè§’åº¦çš„æƒ…å†µä¸‹ç¼©æ”¾æ—¶çš„ä½ç½®åç§»é—®é¢˜

<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/750957817f4048938c00177cafca64c9~tplv-k3u1fbpfcp-watermark.image?" alt="demo1.gif" width="100%" />

#### 3. å›¾å½¢é è¿‘å¯¹é½å¸é™„

<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90d84784e00f4bf8b3a9b7d087f20aa1~tplv-k3u1fbpfcp-watermark.image?" alt="demo2.gif" width="100%" />

#### 4. è¿æ¥çº¿


<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2abc6821e7d4117afe1360a25deff58~tplv-k3u1fbpfcp-watermark.image?" alt="demo4.gif" width="100%" />

#### 5. ä¸€äº›å¤æ‚çš„å½¢çŠ¶


<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9beecada97b643fa82ed6e7b041e0a90~tplv-k3u1fbpfcp-watermark.image?" alt="demo5.gif" width="100%" />

#### 6. æ¨¡ç‰ˆæ ·ä¾‹å±•ç¤º


<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ca6252f06244c0f9c7484bc309499ff~tplv-k3u1fbpfcp-watermark.image?" alt="demo6.gif" width="100%" />


## äºŒã€ä»‹ç»

### 1. èˆå°

`èˆå°(Stage)` è¡¨ç¤ºèˆå°ç”»å¸ƒï¼Œå®ƒå¯ä»¥åŒ…å«å¤šä¸ªç²¾çµç»„ä»¶ï¼Œä»è€Œå®ç°å¤šä¸ªç²¾çµçš„åŒæ—¶æ˜¾ç¤ºå’Œç¼–è¾‘ã€‚

åœ¨èˆå°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬é¼ æ ‡äº‹ä»¶ã€é”®ç›˜äº‹ä»¶ç­‰ç”¨æˆ·è¾“å…¥ï¼Œä»è€Œå®ç°æ‹–æ‹½ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰äº¤äº’æ“ä½œã€‚



### 2. ç²¾çµ

`ç²¾çµ(Sprite)` æ˜¯æŒ‡å¯ä»¥åœ¨ç”»å¸ƒä¸Šæ‹–æ‹½ã€æ—‹è½¬ã€ç¼©æ”¾ã€æ”¹å˜é¢œè‰²ç­‰æ“ä½œçš„å¯è§†åŒ–å¯¹è±¡ã€‚(ç²¾çµåœ¨èˆå°ä¸Šæ¬¢å¿«çš„è·³è·ƒ)

è¿™äº›å¯è§†åŒ–å¯¹è±¡å¯ä»¥æ˜¯åŸºæœ¬çš„å‡ ä½•å½¢çŠ¶ï¼Œæ¯”å¦‚çŸ©å½¢ã€åœ†å½¢ã€å¤šè¾¹å½¢ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤æ‚çš„å›¾å½¢ï¼Œæ¯”å¦‚å›¾æ ‡ã€æ ‡å¿—ã€æ–‡å­—ã€å›¾ç‰‡ç­‰ã€‚

åœ¨å›¾å½¢ç¼–è¾‘å™¨ä¸­ï¼Œç²¾çµç³»ç»Ÿé€šå¸¸æ˜¯ä¸€ä¸ªé‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡æ‹–æ‹½ç­‰æ“ä½œï¼Œå¿«é€Ÿåœ°åˆ›å»ºã€ä¿®æ”¹å’Œç»„åˆä¸åŒçš„ç²¾çµï¼Œä»è€Œåˆ›å»ºå‡ºå¤æ‚çš„å›¾å½¢ã€‚



## ä¸‰ã€å®ç°ä¸€ä¸ªèˆå°å’Œç²¾çµçš„Demo

åœ¨ä¸‹é¢çš„ä¾‹å­é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„demoæ¼”ç¤ºç²¾çµç³»ç»Ÿï¼š
1. ä½¿ç”¨ `svg` å®ç°äº†ä¸€ä¸ªéå¸¸ç®€å•çš„`èˆå°`;
2. ä½¿ç”¨ `g` æ ‡ç­¾å®ç° `ç²¾çµ` ç»„ä»¶ï¼Œå®ƒè´Ÿè´£ `å®šä½`ï¼Œä½¿ç”¨ transform="translate(x, y)" å®ç°;
3. ä½¿ç”¨ `rect` æ ‡ç­¾å®ç°çŸ©å½¢ï¼Œå®ƒä¸ç”¨å…³å¿ƒè‡ªå·±æ‰€åœ¨çš„ä½ç½®ï¼Œåªéœ€å…³å¿ƒå¤§å°å’Œæ ·å¼å³å¯;
4. ä½¿ç”¨ `line` æ ‡ç­¾å®ç°çŸ©å½¢ï¼Œå®ƒä¸ç”¨å…³å¿ƒè‡ªå·±æ‰€åœ¨çš„ä½ç½®ï¼Œåªéœ€å…³å¿ƒèµ·å§‹ç‚¹å’Œæ ·å¼å³å¯;


#### 1. Demo
```ts

// Demo
import { Stage } from "./stage";
import { Sprite } from "./sprite";
import { RectSprite } from "./sprites/rect";
import { LineSprite } from "./sprites/line";

export const StageDemo = ({ width, height }) => {
  return (
    <Stage width={width} height={height}>
      {/* çŸ©å½¢ç²¾çµ */}
      <Sprite x={200} y={50}>
        <RectSprite width={400} height={240}></RectSprite>
      </Sprite>
      {/* çº¿æ®µç²¾çµ */}
      <Sprite x={100} y={350}>
        <LineSprite x1={0} y1={0} x2={300} y2={100}></LineSprite>
      </Sprite>
    </Stage>
  );
};


```

#### 2. æ•ˆæœå›¾

<img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/778706f5605f4799825ada1e60cce595~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" width="100%" />



#### 3. èˆå°
```ts
// èˆå°
export const Stage = ({ width, height, children }) => {
  return (
    <svg
      className="stage-container"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      width={width}
      height={height}
      style={{
        width,
        height,
        outline: "1px solid #ddd"
      }}
    >
      {children}
    </svg>
  );
};

```


#### 4. ç²¾çµ
```ts
// ç²¾çµ
export const Sprite = ({ x, y, children }) => {
  return (
    <g className="sprite-container" transform={`translate(${x}, ${y})`}>
      {children}
    </g>
  );
};
```

#### 5. çŸ©å½¢ç²¾çµ
```ts

// çŸ©å½¢ç²¾çµ
export const RectSprite = ({ width, height }) => {
  return (
    <rect
      x="0"
      y="0"
      width={width}
      height={height}
      fill="#f2e7ff"
      stroke="#a245ff"
      stroke-width="3"
    ></rect>
  );
};

```

#### 6. çº¿æ®µç²¾çµ
```ts

// çº¿æ®µç²¾çµ
export const LineSprite = ({ x1, y1, x2, y2 }) => {
  return (
    <line x1={x1} y1={y1} x2={x2} y2={y2} stroke="#ffa245" stroke-width="3" />
  );
};

```


## æ€»ç»“ & è§„åˆ’

æœ¬æ–‡ä»‹ç»äº†å€ŸåŠ© `èˆå°` å’Œ `ç²¾çµ`çš„æ¦‚å¿µå®ç°äº†ä¸€ä¸ªéå¸¸ç®€å•ä½†æ˜¯éå¸¸å…·æœ‰ä»£è¡¨æ€§çš„`å›¾å½¢ç¼–è¾‘å™¨` ï¼Œè¿™å°±æ˜¯å›¾å½¢ç¼–è¾‘å™¨çš„éª¨æ¶ï¼Œæœªæ¥æˆ‘ä»¬ä¼šåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œèƒ½åŠ›è¡¥å……ï¼Œä¸æ–­ä¸°å¯Œå›¾å½¢ç¼–è¾‘å™¨çš„èƒ½åŠ›ï¼Œä¾‹å¦‚ï¼š

1. ç²¾çµç‰©æ–™çš„è§„èŒƒï¼ˆå¦‚ä½•è‡ªå®šä¹‰å¼€å‘ç²¾çµï¼‰
2. ä½¿ç”¨ä¾èµ–åè½¬æ€æƒ³ï¼Œç²¾çµä¸èˆå°è§£è€¦ï¼Œå®ç°ç²¾çµæ³¨å†Œæœºåˆ¶
3. é€šè¿‡æ‹–æ‹½å®ç° `ç§»åŠ¨` `ç¼©æ”¾` `æ—‹è½¬`
4. æ‹–æ‹½åŠ å…¥ï¼Œå®šåˆ¶ç²¾çµåŠ å…¥èˆå°æ—¶çš„ç‰¹æ®Šäº¤äº’ï¼Œå¦‚å¤šè¾¹å½¢
5. é”šç‚¹ï¼ˆç”¨æ¥ç¼©æ”¾ï¼‰
6. ç«¯å£ï¼ˆç”¨æ¥è¿çº¿ï¼‰
7. è®¾ç½®è¾¹æ¡†ã€å¡«å……ç­‰æ ·å¼çš„å·¥å…·æ 
8. ç²¾çµä¹‹é—´é è¿‘å¸é™„ã€è¾…åŠ©çº¿ç­‰
9. èˆå°ç½‘æ ¼å¸é™„
10. å…¶ä»–èƒ½åŠ›...

### ç³»åˆ—æ–‡ç« æ±‡æ€»

1. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—ä¸€ï¼šç²¾çµç³»ç»Ÿ](https://juejin.cn/post/7210539669204566077)
2. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—äºŒï¼šç²¾çµçš„å¼€å‘å’Œæ³¨å†Œ](https://juejin.cn/post/7211284290067513400)
3. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—ä¸‰ï¼šç§»åŠ¨ã€ç¼©æ”¾ã€æ—‹è½¬](https://juejin.cn/post/7212290641485545531)
4. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—å››ï¼šå¸é™„&è¾…åŠ©çº¿](https://juejin.cn/post/7212637065753264189)
5. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—äº”ï¼šè¾…åŠ©ç¼–è¾‘é”šç‚¹](https://juejin.cn/post/7213016298250043448)
6. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—å…­ï¼šé“¾æ¥çº¿ã€è¿æ¥æ¡©](https://juejin.cn/post/7213379884692684860)
7. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—ä¸ƒï¼šå³é”®èœå•ã€å¿«æ·é”®ã€æ’¤é”€å›é€€](https://juejin.cn/post/7213757571960799291)
8. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—å…«ï¼šå¤šé€‰ã€ç»„åˆã€è§£ç»„](https://juejin.cn/post/7214901105976868901)
9. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—ä¹ï¼šç²¾çµçš„ç¼–è¾‘æ€&å¼€å‘å¸¸ç”¨ç²¾çµ](https://juejin.cn/post/7215620087825481784)
10. [svgå®ç°å›¾å½¢ç¼–è¾‘å™¨ç³»åˆ—åï¼šå·¥å…·æ &é…ç½®é¢æ¿ï¼ˆæœ€ç»ˆç¯‡ï¼‰](https://juejin.cn/post/7216340356950442044)


## ğŸ”¥ demoæ¼”ç¤ºæºç 

æœ€ååº”å¤§å®¶è¦æ±‚ï¼Œè¿™é‡Œæ”¾ä¸Šcode sandboxçš„demoä»£ç :
- [codesandbox Demoï¼šsrc/demos/demo-stage/index.tsx](https://codesandbox.io/s/editor-example-yqp8ce?file=/src/demos/demo-stage/index.tsx)

<img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cce20b4df0d24f37aa611ee6c33e789a~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" width="100%" />


## Setup

Install the dependencies:

```bash
pnpm install
```

## Get Started

Start the dev server:

```bash
pnpm dev
```

Enable optional features or add a new entry:

```bash
pnpm new
```

Build the app for production:

```bash
pnpm build
```

Preview the production build locally:

```bash
pnpm serve
```

For more information, see the [Modern.js documentation](https://modernjs.dev/en).
